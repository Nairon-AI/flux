---
name: flux-contribute
description: Analyze Flux issues and create PRs to fix them. Self-improving feedback loop for the plugin.
user-invocable: false
---

# Flux Contribute

Create PRs to fix Flux bugs directly from your Claude Code session.

**Role**: bug analyzer, PR creator
**Goal**: fast feedback loop — encounter issue → create PR → merge → upgrade → fixed

## Input

Issue description: $ARGUMENTS

## Prerequisites

- `gh` CLI installed and authenticated (`gh auth status`)
- Write access to Nairon-AI/flux (or fork permission for external contributors)

## Workflow

### Step 1: Analyze the Issue

Determine if this is:
1. **Genuine Flux bug** — Missing file, broken command, incorrect behavior
2. **Documentation gap** — README unclear, missing examples
3. **User error** — Not a Flux problem (guide user instead)
4. **Feature request** — New functionality needed

If user error, explain the correct usage and stop.

### Step 2: Locate the Fix

Flux structure:
```
flux/
├── commands/flux/          # Command definitions
├── skills/                 # Skill implementations
├── agents/                 # Scout agents
├── scripts/                # Python/bash utilities
├── docs/                   # Documentation
└── README.md               # Main docs
```

Identify which file(s) need changes.

### Step 3: Create the Fix

Clone Flux repo to temp directory if needed:
```bash
FLUX_REPO="/tmp/flux-contribution-$(date +%s)"
gh repo clone Nairon-AI/flux "$FLUX_REPO"
cd "$FLUX_REPO"
```

Create a branch:
```bash
BRANCH="fix/$(echo "$ISSUE_SUMMARY" | tr ' ' '-' | tr '[:upper:]' '[:lower:]' | head -c 50)"
git checkout -b "$BRANCH"
```

Make the fix using Edit/Write tools.

### Step 4: Commit and Push

```bash
git add -A
git commit -m "fix: $ISSUE_SUMMARY"
git push -u origin "$BRANCH"
```

### Step 5: Create PR

```bash
gh pr create \
  --repo Nairon-AI/flux \
  --title "fix: $ISSUE_SUMMARY" \
  --body "## Issue
$ISSUE_DESCRIPTION

## Fix
$FIX_DESCRIPTION

## How to Test
1. Upgrade plugin: \`/plugin marketplace update nairon-flux\`
2. Verify: $TEST_STEPS

---
*Auto-generated by /flux:contribute*"
```

### Step 6: Report to User

Show:
- PR URL
- What was fixed
- How to upgrade once merged:
  ```bash
  /plugin marketplace update nairon-flux
  ```

## Guardrails

### Only Fix Genuine Issues
- Don't create PRs for user errors
- Don't create PRs for feature requests (open issue instead)
- Verify the fix actually solves the problem

### Keep PRs Focused
- One issue per PR
- Minimal changes
- Clear commit message

### For External Contributors
If user doesn't have write access:
```bash
gh repo fork Nairon-AI/flux --clone
# Then create PR from fork
```

## Quick Fix Mode

For maintainers with write access, skip the temp clone if already in flux repo:
```bash
# If current dir is flux repo
git checkout -b fix/issue-name
# Make fix
git push -u origin fix/issue-name
gh pr create ...
```
